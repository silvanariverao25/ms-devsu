// GetCuentaUseCase.java
package com.banco.mscuentas.application.cuenta;

import com.banco.mscuentas.api.dto.CuentaResponse;
import com.banco.mscuentas.infrastructure.jpa.repository.CuentaRepository;
import org.springframework.stereotype.Service;

import java.util.UUID;

@Service
public class GetCuentaUseCase {
  private final CuentaRepository repo;
  public GetCuentaUseCase(CuentaRepository r){ this.repo=r; }

  public List<CuentaResponse> getCuentas(){
	    var e = repo.findAll();
	    return new CuentaResponse(e.getCuentaId(), e.getClienteId(), e.getNumeroCuenta(), e.getTipoCuenta(), e.getSaldoInicial(), e.getEstado());
	  }  
  
  public CuentaResponse byId(UUID id){
    var e = repo.findById(id).orElseThrow(() -> new IllegalArgumentException("Cuenta no encontrada"));
    return new CuentaResponse(e.getCuentaId(), e.getClienteId(), e.getNumeroCuenta(), e.getTipoCuenta(), e.getSaldoInicial(), e.getEstado());
  }

  public CuentaResponse byNumero(String numero){
    var e = repo.findByNumeroCuenta(numero).orElseThrow(() -> new IllegalArgumentException("Cuenta no encontrada"));
    return new CuentaResponse(e.getCuentaId(), e.getClienteId(), e.getNumeroCuenta(), e.getTipoCuenta(), e.getSaldoInicial(), e.getEstado());
  }
}
